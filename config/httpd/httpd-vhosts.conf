NameVirtualHost *:80
NameVirtualHost *:443

<VirtualHost *:80>
    DocumentRoot /var/www/kineticode.com
    ServerName kineticode.com
    ServerAlias www.kineticode.com
    CustomLog "|/usr/bin/cronolog /var/log/httpd/%Y/%m/access_log-kineticode.com.%Y%m%d --link=/var/log/httpd/access_log-kineticode.com" combined
    ErrorDocument 404 /lib/err/404.html
     <Directory /var/www/kineticode.com>
       AllowOverride All
       Allow from all
     </Directory>
    <Location />
        AddOutputFilter INCLUDES .html
        Options Indexes FollowSymLinks +Includes
    </Location>
</VirtualHost>

<VirtualHost *:80>
  ServerName preview.kineticode.com
  RedirectPermanent / https://preview.kineticode.com/
</VirtualHost>

<VirtualHost *:443>
  DocumentRoot /var/www/preview.kineticode.com
  ServerName preview.kineticode.com
    SSLEngine On
    SSLCertificateFile /etc/ssl/certs/servercert.pem
    SSLCertificateKeyFile /etc/ssl/private/serverkey.pem
    SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP:+eNULL
  <Directory /var/www/preview.kineticode.com>
    AllowOverride All
  </Directory>
  <Location />
    AuthType Basic
    AuthBasicProvider ldap
    AuthName "Kineticode Preview Server"
    AuthLDAPCompareDNOnServer on
    AuthLDAPUrl ldap://ldap.kineticode.com/ou=people,dc=kineticode,dc=com?uid?sub?(objectClass=inetOrgPerson)
    AuthLDAPBindDN uid=nobody,ou=daemons,dc=kineticode,dc=com
    AuthLDAPBindPassword -PASSWORD-
    AuthLDAPGroupAttribute uniqueMember
    Allow from all
    Require ldap-group cn=Bricolage,ou=group,dc=kineticode,dc=com
  </Location>
</VirtualHost>

<VirtualHost *:80>
    DocumentRoot /var/www/stats.kineticode.com
    ServerName stats.kineticode.com
    Alias /icons   /usr/share/awstats/icon
    Alias /css     /usr/share/doc/awstats/examples/css
    ScriptAlias    /cgi-bin /usr/lib/cgi-bin/
    RewriteEngine on
    RewriteRule ^/(.*)$ /usr/lib/cgi-bin/awstats.pl$1 [last]
    <Directory /var/www/stats.kineticode.com>
        AllowOverride All
        Allow from all
    </Directory>
    <Directory /usr/lib/cgi-bin/>
        Allow from all
        SetHandler cgi-script
        Options +ExecCGI
    </Directory>
    <Directory /usr/share/awstats/icon>
        AllowOverride All
        Allow from all
    </Directory>
    <Directory /usr/share/doc/awstats/examples/css>
        AllowOverride All
        Allow from all
    </Directory>
</VirtualHost>

<VirtualHost *:80>
    DocumentRoot /var/www/strongrrl.com
    ServerName strongrrl.com
    ServerAlias www.strongrrl.com
    CustomLog "|/usr/bin/cronolog /var/log/httpd/%Y/%m/access_log-strongrrl.com.%Y%m%d --link=/var/log/httpd/access_log-strongrrl.com" combined
    ErrorDocument 404 /err/404/index.html
    <Directory /var/www/strongrrl.com>
      AllowOverride All
      Allow from all
    </Directory>
</VirtualHost>

<VirtualHost *:80>
  ServerName preview.strongrrl.com
  RedirectPermanent / https://preview.strongrrl.com/
</VirtualHost>

<VirtualHost *:443>
  DocumentRoot /var/www/preview.strongrrl.com
  ServerName preview.strongrrl.com
  ErrorDocument 404 /err/404/index.html
    SSLEngine On
    SSLCertificateFile /etc/ssl/certs/servercert.pem
    SSLCertificateKeyFile /etc/ssl/private/serverkey.pem
    SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP:+eNULL
  <Directory /var/www/preview.strongrrl.com>
    AllowOverride All
  </Directory>
  <Location />
    AuthType Basic
    AuthBasicProvider ldap
    AuthName "Strongrrl Preview Server"
    AuthLDAPCompareDNOnServer on
    AuthLDAPUrl ldap://ldap.kineticode.com/ou=people,dc=kineticode,dc=com?uid?sub?(objectClass=inetOrgPerson)
    AuthLDAPBindDN uid=nobody,ou=daemons,dc=kineticode,dc=com
    AuthLDAPBindPassword -PASSWORD-
    AuthLDAPGroupAttribute uniqueMember
    Allow from all
    Require ldap-group cn=Bricolage,ou=group,dc=kineticode,dc=com
  </Location>
</VirtualHost>

<VirtualHost *:80>
    DocumentRoot /var/www/vinifile.com
    ServerName vinifile.com
    ServerAlias www.vinifile.com
    CustomLog "|/usr/bin/cronolog /var/log/httpd/%Y/%m/access_log-vinifile.com.%Y%m%d --link=/var/log/httpd/access_log-vinifile.com" combined
    <Directory /var/www/vinifile.com>
      AllowOverride All
      Allow from all
    </Directory>
</VirtualHost>

<VirtualHost *:80>
    DocumentRoot /var/www/back.openjsan.org
    ServerName back.openjsan.org
    ServerAlias jsan.kineticode.com
    CustomLog "|/usr/bin/cronolog /var/log/httpd/%Y/%m/access_log-back.openjsan.org.%Y%m%d --link=/var/log/httpd/access_log-back.openjsan.org" combined
     <Directory /var/www/back.openjsan.org>
       AllowOverride All
       Allow from all
     </Directory>
    <Location />
        Options Indexes FollowSymLinks +Includes
    </Location>
</VirtualHost>

<IfModule mod_dav_svn.c>
    <VirtualHost *:80>
      ServerName svn.kineticode.com
      RedirectPermanent / https://svn.kineticode.com/
    </VirtualHost>

    <VirtualHost *:443>
        ServerName svn.kineticode.com
        SSLEngine On
        SSLProxyEngine On
        SSLCertificateFile /etc/ssl/certs/servercert.pem
        SSLCertificateKeyFile /etc/ssl/private/serverkey.pem
        SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP:+eNULL
        CustomLog "|/usr/bin/cronolog /var/log/httpd/%Y/%m/access_log-svn.kineticode.com.%Y%m%d --link=/var/log/httpd/access_log-svn.kineticode.com" combined
        # LDAPTrustedGlobalCert CA_BASE64 etc/ssl/certs/cacert.pem
        # LDAPTrustedMode TLS
        <Location />
            DAV svn
            SVNPath /var/svn
            AuthType Basic
            AuthBasicProvider ldap
            AuthName "Kineticode Subversion Server"
            AuthLDAPCompareDNOnServer on
            AuthLDAPUrl ldap://ldap.kineticode.com/ou=people,dc=kineticode,dc=com?uid?sub?(objectClass=inetOrgPerson)
            AuthLDAPBindDN uid=nobody,ou=daemons,dc=kineticode,dc=com
            AuthLDAPBindPassword -PASSWORD-
            AuthLDAPGroupAttribute uniqueMember
            # Allow anonymous accesss.
            Allow from all
            <LimitExcept GET PROPFIND OPTIONS REPORT>
                Require ldap-group cn=Subversion,ou=group,dc=kineticode,dc=com
            </LimitExcept>
        </Location>
        # Disallow anonymous access to the Corporate stuff.
        <Location /Corporate>
            Require ldap-group cn=Subversion,ou=group,dc=kineticode,dc=com
         </Location>
        # Disallow anonymous access to old locations of private stuff.
        <Location ~ "/(?:customers|SysadminDocs)">
            Require ldap-group cn=Subversion,ou=group,dc=kineticode,dc=com
        </Location>
        <Location ~ "/trunk/(?:VibeSpin|SysadminDocs)">
            Require ldap-group cn=Subversion,ou=group,dc=kineticode,dc=com
        </Location>
    </VirtualHost>
</ifModule>

<VirtualHost *:80>
  ServerName bugs.bricolage.cc
  Redirect / http://bricolage.lighthouseapp.com/
</VirtualHost>

<VirtualHost *:443>
  ServerName bugs.bricolage.cc
  Redirect / https://bricolage.lighthouseapp.com/
  SSLEngine On
  SSLCertificateFile /etc/ssl/certs/servercert.pem
  SSLCertificateKeyFile /etc/ssl/private/serverkey.pem
  SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP:+eNULL
</VirtualHost>

<VirtualHost *:80>
  ServerName bugs.bricolagecms.org
  Redirect / http://bricolage.lighthouseapp.com/
</VirtualHost>

<VirtualHost *:443>
  ServerName bugs.bricolagecms.org
  Redirect / https://bricolage.lighthouseapp.com/
  SSLEngine On
  SSLCertificateFile /etc/ssl/certs/servercert.pem
  SSLCertificateKeyFile /etc/ssl/private/serverkey.pem
  SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP:+eNULL
</VirtualHost>

<VirtualHost *:80>
    DocumentRoot /var/www/pgxn.org
    ServerName www.pgxn.org
    ServerAlias pgxn.org
    CustomLog "|/usr/bin/cronolog /var/log/httpd/%Y/%m/access_log-pgxn.org.%Y%m%d --link=/var/log/httpd/access_log-pgxn.org" combined
    <Directory /var/www/pgxn.org>
      AllowOverride All
      Allow from all
    </Directory>
</VirtualHost>

<VirtualHost *:80>
    DocumentRoot /var/www/master.pgxn.org
    ServerName master.pgxn.org
    CustomLog "|/usr/bin/cronolog /var/log/httpd/%Y/%m/access_log-master.pgxn.org.%Y%m%d --link=/var/log/httpd/access_log-master.pgxn.org" combined
    <Directory /var/www/master.pgxn.org>
      AllowOverride All
      Allow from all
    </Directory>
</VirtualHost>
